<!DOCTYPE html>
<html>
<head>
    <!--
        Personalice la directiva de seguridad de contenido en la etiqueta meta como sea necesario. Agregue "unsafe-inline" a default-src para permitir JavaScript insertado.
        Para obtener más detalles, consulte http://go.microsoft.com/fwlink/?LinkID=617521
    -->
    <!--<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval' *;script-src 'self' http://*.googleapis.com 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">-->

    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link href="css/jquery.mobile.theme-1.4.5.css" rel="stylesheet" />
    <style>
        #map {
            width: 100%;
            height: 300px;
        }

        .embed-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
        }

            .embed-container iframe {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }
    </style>
    <title>AppMovil5</title>
</head>
<body>
    <div data-role="page" id="pagina1">
        <div data-role="header">
            <h1>Geolocalizacion</h1>
        </div>
        <div data-role="main" class="ui-content">
            <div id="datos" class="">
                <button id="btnMostrarMapa">Mostrar Mapa</button>
                <div class="ui-field-contain">
                    <label for="txtLat">Latitud:</label>
                    <input id="txtLat" type="text" value="" readonly />
                    <label for="txtLon">Longitud:</label>
                    <input id="txtLon" type="text" value="" readonly />
                </div>
            </div>
            <div>
                <script type="text/javascript" src="scripts/jquery-2.2.3.min.js"></script>
                <script type="text/javascript" src="scripts/jquery.mobile-1.4.5.js"></script>
                <script type="text/javascript" src="scripts/index.js"></script>
                <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA6exMsxCcVCc_UkQUP4eJVVXm2IEzSPkE"></script>
                <script>
                    $(function () {
                        $('#btnMostrarMapa').click(getDatos);
                        function getDatos() {
                            navigator.geolocation.getCurrentPosition(onSuccess, onError, {
                                maximumAge: 300000,
                                timeout: 10000,
                                enableHighAccuracy: true
                            });
                        }

                        function onSuccess(position) {
                            var cusLat = position.coords.latitude;
                            var cusLon = position.coords.longitude;

                            document.getElementById("txtLat").value = cusLat;
                            document.getElementById("txtLon").value = cusLon;
                            try {
                                var coords = new google.maps.LatLng(cusLat, cusLon);

                                var opciones = {
                                    center: coords, zoom: 15
                                };

                                var mapa = new google.maps.Map(document.getElementById("map"), opciones);
                                var marcador = new google.maps.Marker({
                                    position: coords,
                                    map: mapa,
                                    title: "Mi ubicacion",
                                    animation: google.maps.Animation.DROP
                                });
                            }
                            catch (err) {
                                console.log(err.message);
                                alert(err.message);
                            }
                        }

                        function onError(err) {
                            console.log("codigo de err:" + err.code + "msj = " + err.message);
                        }
                    })
                </script>
                <div id="map"></div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="scripts/platformOverrides.js"></script>
</body>
</html>
